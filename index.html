<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feliz Aniversario, Mon amour </title>
    <!-- Google Fonts: Roboto (general) y Dancing Script (romántico) -->
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- MENÚ LATERAL IZQUIERDO -->
    <div class="side-menu-container">
      <nav class="side-menu">
        <button class="menu-btn color1" data-menu="0"></button>
        <button class="menu-btn color2" data-menu="1"></button>
        <button class="menu-btn color3" data-menu="2"></button>
        <button class="menu-btn color4" data-menu="3"></button>
        <button class="menu-btn color5" data-menu="4"></button>
        <button class="menu-btn color6" data-menu="5"></button>
        <button class="menu-btn color7" data-menu="6"></button>
        <button class="menu-btn color8" data-menu="7"></button>
        <div id="menu-btn-indicator" class="menu-btn-indicator" style="display:none">
          <svg viewBox="0 0 54 54" fill="none" xmlns="http://www.w3.org/2000/svg">
            <g>
              <circle cx="27" cy="27" r="7" fill="#FFD234"/>
              <g>
                <ellipse cx="27" cy="10" rx="5" ry="10" fill="#FFCC3B"/>
                <ellipse cx="27" cy="44" rx="5" ry="10" fill="#FFB534"/>
                <ellipse cx="10" cy="27" rx="10" ry="5" fill="#FF8F2C"/>
                <ellipse cx="44" cy="27" rx="10" ry="5" fill="#F4AE42"/>
                <ellipse cx="15" cy="15" rx="6" ry="3" fill="#F9C046"/>
                <ellipse cx="39" cy="15" rx="6" ry="3" fill="#D8CB34"/>
                <ellipse cx="15" cy="39" rx="6" ry="3" fill="#B3B232"/>
                <ellipse cx="39" cy="39" rx="6" ry="3" fill="#5C6B00"/>
              </g>
            </g>
          </svg>
        </div>
      </nav>
      <div class="side-menu-content">
        <div class="menu-content" data-content="0"> Llegas a lo más recondito de mi mente. La embelesas mediante la lectura que narra tu cuerpo al sentirte </div>
        <div class="menu-content" data-content="1"> Eres un museo de arte, un compendio de recuerdos fascinantes, un refugio de emociones duraderas </div>
<div class="menu-content" data-content="2" type="text" style="direction:ltr">
<br>Si fueras un río,<br>
yo sería una canoa tallada en madera, con magia despertada al recorrer tus ondulaciones<br>
de agua resplandeciente.<br><br>
Tu corriente arrastraría mi cuerpo empapado 
en tu esencia hacia un manantial revitalizante: paraíso indómito al que pertenezco.<br><br>
Me guiarías por cauces diversos y contemplativos,<br>
mientras abres paso a las ofrendas que guardo en mi interior. 
Y llegará el momento de lanzarlas hacia tu desembocadura:
Destino que solo tú me puedes mostrar desde tu caudal sereno.<br><br>
Los peces de tu amor rozan mi piel. Saltan en mi vientre. Siempre habrá espacio para ellos.<br><br>
Bosque magno emergente de tus profundidades,<br>
rodeando de paz nuestro viaje lleno de gozos y emociones.<br>
El trayecto inequívoco que nos une por siempre.<br><br>
</div>
        <div class="menu-content" data-content="3">Texto del botón 4 (personaliza aquí)</div>
        <div class="menu-content" data-content="4">Texto del botón 5 (personaliza aquí)</div>
        <div class="menu-content" data-content="5">Texto del botón 6 (personaliza aquí)</div>
        <div class="menu-content" data-content="6">Texto del botón 7 (personaliza aquí)</div>
        <div class="menu-content" data-content="7">Texto del botón 8 (personaliza aquí)</div>
      </div>
    </div>

    <!-- Fondo animado de flores -->
    <canvas id="flowers-bg"></canvas>

    <!-- Aviones con pancartas animados -->
    <div class="wrapper pointer-events-none">
        <div class="flex_wrapper"></div>
    </div>

    <div class="container">
        <h1>Feliz 2º Aniversario <img src="css/mushroom1.png" alt="Mushroom" style="height:1.2em;vertical-align:middle;"> <br> Mi alma gemela <img src="css/mushroom2.png" alt="Mushroom" style="height:1.2em;vertical-align:middle;"></h1>
        <div class="carousel">
            <button class="prev"><img src="css/prev.png" alt="Anterior" class="icon-arrow"></button>
            <div class="carousel-images">
                <!-- Las imágenes se insertan dinámicamente con JavaScript -->
            </div>
            <div style="display: flex; flex-direction: column; align-items: center; gap: 8px; min-width: 48px;">
                <button class="next"><img src="css/next.png" alt="Siguiente" class="icon-arrow"></button>
                <button class="play-pause"><img src="css/play.png" alt="Play/Pause" class="icon-play" id="playPauseIcon"></button>
            </div>
        </div>
        <p class="dedication">Gracias por estos dos años maravillosos juntos <img src="css/mushroom3.png" alt="Mushroom" style="height:1.2em;vertical-align:middle;"> <br> Te amo demasiado <img src="css/mushroom6.png" alt="Mushroom" style="height:1.2em;vertical-align:middle;"></p>
        <!-- Spotify embed -->
        <div class="spotify-player">
            <iframe style="border-radius:12px" src="https://open.spotify.com/embed/playlist/2TvcPy3tMB6BbPWPjhqeJx?utm_source=generator" width="100%" height="80" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>
        </div>

        <div class="lista-deseos-panel" id="lista-deseos-panel">
          <h2><img src="css/mushroom4.png" alt="Mushroom" style="height:1.2em;vertical-align:middle;"> Lista de deseos <img src="css/mushroom5.png" alt="Mushroom" style="height:1.2em;vertical-align:middle;"></h2>
          <form id="deseos-form" autocomplete="off">
            <input type="text" id="deseo-input" placeholder="Agregar deseo o plan..." maxlength="80" />
            <button type="submit" class="deseo-btn">Añadir</button>
          </form>
          <ul class="deseos-lista" id="deseos-lista"></ul>
        </div>
    </div>
    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
    <script src="js/script.js"></script>
    <script>
    // Lógica menú lateral con toggle, efecto ripple y flor indicadora
    const menuBtns = document.querySelectorAll('.menu-btn');
    const menuContents = document.querySelectorAll('.menu-content');
    const indicator = document.getElementById('menu-btn-indicator');
    let lastOpen = null;
    menuBtns.forEach(btn => {
      btn.addEventListener('click', e => {
        if (e.button !== 0) return; // solo click izquierdo
        // Ripple effect
        const ripple = document.createElement('span');
        ripple.className = 'ripple';
        btn.appendChild(ripple);
        setTimeout(() => ripple.remove(), 600);

        const idx = btn.getAttribute('data-menu');
        const content = document.querySelector('.menu-content[data-content="' + idx + '"]');
        if (content.style.display === 'block') {
          content.style.display = 'none';
          indicator.style.display = 'none';
          lastOpen = null;
        } else {
          menuContents.forEach(c => c.style.display = 'none');
          content.style.display = 'block';
          // Mover el indicador floral sobre el botón activo
          indicator.style.display = 'flex';
          indicator.style.position = 'absolute';
          indicator.style.left = (btn.offsetLeft + btn.offsetWidth/2 + 2) + 'px'; // aún más a la derecha
          indicator.style.top = (btn.offsetTop + btn.offsetHeight/2 + 4) + 'px';  // un poco más abajo
          lastOpen = idx;
        }
      });
    });
    // Ocultar todos al inicio
    menuContents.forEach(c => c.style.display = 'none');

    // Animación del mapache de izquierda a derecha, alineado al suelo
    window.addEventListener('DOMContentLoaded', function() {
    const mapache = document.getElementById('mapache-animado');
    if (!mapache) return;

    let pos = 0;
    let direction = 1;
    let speed = 0.7 + Math.random() * 0.5;
    let stopped = false;
    let distanceSinceStop = 0;
    let lastTimestamp = null;
    const stopInterval = 180 + Math.random() * 120;
    const stopDuration = 900 + Math.random() * 700;

    function moveMapache(ts) {
      if (stopped) return;
      if (!lastTimestamp) lastTimestamp = ts;
      const delta = ts - lastTimestamp;
      lastTimestamp = ts;

      const maxRight = window.innerWidth - mapache.offsetWidth;
      const step = direction * speed * (delta / 16.67);
      pos += step;
      distanceSinceStop += Math.abs(step);

      // Desaparece al llegar a la derecha y reaparece para ir a la izquierda
      if (direction === 1 && pos >= maxRight) {
        mapache.style.left = maxRight + 'px';
        mapache.style.transform = 'scaleX(-1)';
        mapache.style.opacity = '0';
        setTimeout(() => {
          pos = maxRight;
          direction = -1;
          mapache.style.left = maxRight + 'px';
          mapache.style.transform = 'scaleX(-1)';
          mapache.style.opacity = '1';
          lastTimestamp = null;
          distanceSinceStop = 0;
          requestAnimationFrame(moveMapache);
        }, 10000);
        return;
      }
      // Desaparece al llegar a la izquierda y reaparece para ir a la derecha
      if (direction === -1 && pos <= 0) {
        mapache.style.left = '0px';
        mapache.style.transform = 'scaleX(1)';
        mapache.style.opacity = '0';
        setTimeout(() => {
          pos = 0;
          direction = 1;
          mapache.style.left = '0px';
          mapache.style.transform = 'scaleX(1)';
          mapache.style.opacity = '1';
          lastTimestamp = null;
          distanceSinceStop = 0;
          requestAnimationFrame(moveMapache);
        }, 10000);
        return;
      }

      mapache.style.left = pos + 'px';

      if (distanceSinceStop >= stopInterval) {
        stopped = true;
        setTimeout(() => {
          stopped = false;
          distanceSinceStop = 0;
          lastTimestamp = null;
          requestAnimationFrame(moveMapache);
        }, stopDuration);
      } else {
        requestAnimationFrame(moveMapache);
      }
    }

    function alignBottom() {
      mapache.style.bottom = '0px';
    }
    window.addEventListener('resize', alignBottom);

    requestAnimationFrame(moveMapache);
  });
    </script>

    <!-- Mapache animado -->
    <img id="mapache-animado" src="css/mapache.gif" alt="Mapache" style="position:fixed;left:0;bottom:0;width:80px;height:auto;z-index:1200;pointer-events:none;">
</body>
</html>
</html>
